# airdrop
 
Это проект смарт-контракта для отправки токенов неограниченному количеству полльзователей.

В этой версии я добавил несколько проверок проверки ввода, чтобы убедиться, что входные параметры действительны перед выполнением передачи. Конкретно:

Я добавил оператор require для проверки того, что массив получателей не пуст.
Я добавил оператор require для проверки того, что длина массива получателей совпадает с длиной массива сумм.
Я добавил цикл for для перебора массивов получателей и сумм и проверки того, что каждый адрес получателя не равен нулю, а каждая сумма больше нуля.
Я добавил оператор require для проверки того, что отправитель разрешил контракту потратить достаточное количество токенов, проверив разрешение контракта на токен.
Я добавил оператор require для проверки наличия у отправителя достаточного количества токенов для покрытия общей суммы перевода.
Добавляя эти проверки проверки ввода, мы можем помочь предотвратить потенциальные ошибки или уязвимости безопасности в смарт-контракте.

Я добавил событие под названием TokenTransfer для регистрации каждой передачи токена, которая происходит в функции sendTokens. Событие включает адрес отправителя, адрес получателя и сумму перевода.

Я также добавил оператор emit внутри цикла for, который передает токены, который запускает событие TokenTransfer и регистрирует детали передачи в блокчейне.

Я добавил обработку ошибок для операции передачи токена внутри цикла for, который передает токены. Мы используем низкоуровневую функцию вызова для выполнения функции TransferFrom по адресу контракта токена и фиксируем логическое значение успеха, возвращаемое вызовом.

Затем я использую оператор require, чтобы убедиться, что передача прошла успешно, прежде чем генерировать событие TokenTransfer. Если передача не удалась, оператор require отменит транзакцию и вернет сообщение об ошибке «Ошибка передачи токена».

В файле тестирования код использует функцию `describe` Mocha для определения набора тестов контракта и функцию `beforeEach` для развертывания нового экземпляра `Token` и `TokenSender` перед каждым тестовым случаем. Затем он определяет пять тестовых случаев, которые охватывают различные сценарии отправки токенов, включая отправку токенов в качестве администратора контракта, отправку токенов в качестве оператора, попытку отправки токенов с недостаточным объемом или балансом и попытку отправки токенов с пустыми массивами получателей или сумм.

Каждый тестовый пример использует функцию ожидания Chai для определения утверждений, которые проверяют ожидаемое поведение функций смарт-контракта. Если тестовый пример не пройден, он выдает ошибку с сообщением, объясняющим, почему тест не пройден.

В целом, этот код предоставляет исчерпывающий набор тестов, которые охватывают различные сценарии отправки токенов с использованием смарт-контракта «TokenSender».
